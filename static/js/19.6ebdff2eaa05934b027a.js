webpackJsonp([19],{"4zWE":function(n,t,o){var e=o("fnuy");"string"==typeof e&&(e=[[n.i,e,""]]),e.locals&&(n.exports=e.locals);o("rjj0")("e8cc484a",e,!0,{})},GTSK:function(n,t,o){"use strict";function e(n){o("HkMk")}Object.defineProperty(t,"__esModule",{value:!0});var a=o("mvHQ"),s=o.n(a),i=(o("4zWE"),{data:function(){return{lockConfigList:{},locs:[["电子锁1",!1,"foha-001"],["电子锁2",!1,"foha-001"],["电子锁3",!1,"foha-001"],["电子锁4",!1,"foha-001"]],modal1:!1,getlocdata:[],ar:[],statuss:0,indeviceNum:"",deviceNum:"",onuName:"",onuNum:"",nettype:"2G",onuId:"",addr:"",district:"",lng:null,lat:null,projectid:"",phoneNum:""}},created:function(){this.projectid=sessionStorage.getItem("projectid"),this.phoneNum=sessionStorage.getItem("phone")},methods:{getloc:function(){console.log(1),navigator.geolocation.getCurrentPosition(function(n){console.log(n)})},openloc:function(n){var t=this;this.deviceNum?(this.$vux.loading.show({text:"正在解锁中"}),this.$jsonp("http://www.foome.com.cn:8080/ONUDataGather/lockController/openLock?phoneNum="+this.phoneNum+"&deviceNum="+this.deviceNum+"&lockflag="+n,{callbackName:"openLock_callback"}).then(function(n){t.$vux.loading.hide(),console.log(n),"success"==n.name?t.$vux.toast.show({text:"开锁指令下发成功",type:"success",isShowMask:!0}):"wait"==n.name?t.$vux.toast.show({text:"现场设备未准备好,请先激活",type:"warn",isShowMask:!0}):"opened"==n.name?t.$vux.toast.show({text:"门已被打开",type:"success",isShowMask:!0}):"noConfig"==n.name&&t.$vux.toast.show({text:"参数未配置",type:"cancel",isShowMask:!0})}).catch(function(n){t.$vux.loading.hide(),t.$vux.toast.show({text:"开锁失败",type:"text"}),console.log(n)})):this.$vux.toast.show({text:"请输入设备编号",type:"text"})},openmap:function(){this.$router.push({name:"map",params:{onuId:this.onuId}}),this.$Message.info("地图功能....."),this.$router.push({path:"/map"})},refi:function(){var n=[["a",!0],["b",!0],["b",!0]];console.log("qian:"+n),n[0][0]="sfsdfsfdaf",console.log(n)},search:function(){if(console.log("search...."),null==this.indeviceNum||""==this.indeviceNum)this.$Message.info("请输入检索条件");else{var n=this;this.$http({url:"/OnuMonitorNew/DataCommunicate?deviceNum="+n.indeviceNum+"&requestType=12"}).then(function(t){console.log(t.data),"noRecord"==t.data?(n.$Message.info("无数据，请输入正确检索条件!"),n.statuss=0):(console.log(t),n.statuss=1,n.deviceNum=t.data.deviceNum,n.onuName=t.data.onuName,n.onuNum=t.data.onuNum,n.nettype=t.data.nettype,n.onuId=t.data.onuId,n.lng=t.data.longitude,n.lat=t.data.latitude,n.district=t.data.area,n.addr=t.data.address,n.nettype=t.data.nettype)}).catch(function(n){console.log("请求失败："+n.status+","+n.statusText)})}},edit:function(){var n=this;console.log("设备编号:"+n.indeviceNum+"区域:"+n.district),console.log("修改检查中...."),null==n.indeviceNum||""==n.indeviceNum?this.$Message.info("请输入设备编号"):""==n.district||null==n.district?this.$Message.info("请输入区域"):(console.log(n.indeviceNum),this.$http.get("/OnuMonitorNew/DataCommunicate",{params:{onuId:n.onuId,onuName:n.onuName,onuNum:n.onuNum,deviceNum:n.deviceNum,longitude:n.lng,latitude:n.lat,area:n.district,address:n.addr,nettype:n.nettype,flag:1,projectid:n.projectid,requestType:13}}).then(function(t){console.log("success"==t.data),"success"==t.data?n.$Message.info("修改成功!"):"failure"==t.data?n.$Message.info("发生异常"):"occupy"==t.data&&n.$Message.info("设备编号冲突")}).catch(function(n){console.log("请求失败："+n.status+","+n.statusText)}))},add:function(){var n=this;console.log("检查中...."),null==n.indeviceNum||""==n.indeviceNum?this.$Message.info("请输入设备编号"):""==n.district||null==n.district?this.$Message.info("请输入区域"):(console.log(n.indeviceNum),this.$http.get("/OnuMonitorNew/DataCommunicate",{params:{onuId:n.onuId,onuName:n.onuName,onuNum:n.onuNum,deviceNum:n.deviceNum,longitude:n.lng,latitude:n.lat,area:n.district,address:n.addr,nettype:n.nettype,flag:0,projectid:n.projectid,requestType:13}}).then(function(t){console.log(t.data),"success"==t.data?n.$Message.info("新增成功!"):"failure"==t.data?taht.$Message.info("操作失败：发生异常"):"occupy"==t.data?n.$Message.info("操作失败：设备编号重复"):t.data==failure&&n.$Message.info("系统访问异常")}).catch(function(t){"failure"==t.data&&n.$Message.info("系统访问异常"),console.log("请求失败："+t.status+","+t.statusText)}))},getrol:function(){var n=this;console.log("授权检查中...."),0==n.statuss?n.$Message.info("请输入光交信息并提交"):1==n.statuss&&(console.log(n.indeviceNum),this.$http({url:"/OnuMonitorNew/DataCommunicate?deviceNum="+n.deviceNum+"&phoneNum="+this.phoneNum+"&requestType=26"}).then(function(t){console.log(t),"success"==t.data&&n.$Message.info("授权成功"),"impowered"==t.data&&n.$Message.info("已授权"),"noOnu"==t.data&&n.$Message.info("请先输入光交箱信息...")}).catch(function(n){console.log("请求失败："+n.status+","+n.statusText)}))},loconf:function(){var n=this;0==n.statuss?n.$Message.info("请输入光交信息并提交"):1==n.statuss&&(console.log(n.indeviceNum),this.$http({url:"/OnuMonitorNew/DataCommunicate?deviceNum="+n.deviceNum+"&requestType=20"}).then(function(t){console.log(t.data),n.modal1=!0,console.log(t.data);var o=s()(t.data);console.log("str"+o);var e=o.split("}").length-1-1;console.log(e+"条"),console.log(void 0!==n.getlocdata[0]),n.getlocdata=[],n.locs=[["电子锁1",!1,"foha-001"],["电子锁2",!1,"foha-001"],["电子锁3",!1,"foha-001"],["电子锁4",!1,"foha-001"]];for(var a=0;a<e;a++)n.getlocdata.push(JSON.parse(t.data[a]));console.log(n.getlocdata);for(var a=1;a<e;a++)if(void 0!=n.getlocdata[a].lockName)switch(n.getlocdata[a].lockName){case"电子锁1":n.locs[0][0]=n.getlocdata[a].lockName,n.locs[0][1]=!0,n.locs[0][2]=n.getlocdata[a].lockModel;break;case"电子锁2":n.locs[1][0]=n.getlocdata[a].lockName,n.locs[1][1]=!0,n.locs[1][2]=n.getlocdata[a].lockModel;break;case"电子锁3":n.locs[2][0]=n.getlocdata[a].lockName,n.locs[2][1]=!0,n.locs[2][2]=n.getlocdata[a].lockModel;break;case"电子锁4":n.locs[3][0]=n.getlocdata[a].lockName,n.locs[3][1]=!0,n.locs[3][2]=n.getlocdata[a].lockModel}console.log("重置后的locs:"+n.locs),console.log(n.getlocdata),console.log(n.getlocdata[0].lockModel)}).catch(function(n){console.log("请求失败："+n.status+","+n.statusText)}))},ok:function(){var n=this,t=this,o={};console.log("okbefor:"+t.getlocdata[0]);for(var e=0,a=0;a<t.locs.length;a++)if(1==t.locs[a][1])if("foha-001"==t.locs[a][2]){var i={lockconfigdescribe:t.locs[a][0],lockmodelid:"1"};i=s()(i),o[e+1]=i,e+=1}else if("fomei-001"==t.locs[a][2]){var i={lockconfigdescribe:t.locs[a][0],lockmodelid:"2"};i=s()(i),o[e+1]=i,e+=1}console.log(o),this.$http.get("/OnuMonitorNew/DataCommunicate",{params:{onuId:t.onuId,requestType:21,lockConfigList:o}}).then(function(t){console.log(t.data),"success"==t.data&&n.$Message.info("数据提交成功")},function(t){n.$Message.info("发生错误!"),console.log("error")})},cancel:function(){},req_post:function(){var n=this;AMap.plugin("AMap.Geolocation",function(){function t(t){console.log(t.addressComponent.district),console.log(t.position.lng),console.log(t.position.lat),n.lng=t.position.lng,n.lat=t.position.lat,n.district=t.addressComponent.district,n.addr=t.formattedAddress}function o(n){}var e=new AMap.Geolocation({enableHighAccuracy:!0,timeout:200});e.getCurrentPosition(),AMap.event.addListener(e,"complete",t),AMap.event.addListener(e,"error",o)})},goHome:function(){this.$router.push({name:"home"})}}}),l=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"infomain"},[e("x-header",{staticClass:"myHeader"},[n._v("光交箱信息维护\n    "),e("img",{attrs:{slot:"right",width:"22",height:"22",src:o("77/w"),alt:""},on:{click:function(t){n.goHome()}},slot:"right"})]),n._v(" "),e("div",{staticClass:"myinput"},[e("br"),n._v(" "),e("Row",{attrs:{type:"flex",align:"middle"}},[e("Col",{attrs:{span:"19"}},[e("Input",{attrs:{placeholder:"请输入设备编号"},model:{value:n.indeviceNum,callback:function(t){n.indeviceNum=t},expression:"indeviceNum"}})],1),n._v(" "),e("Col",{attrs:{span:"4",offset:"1"}},[e("Button",{staticClass:"mybtn",attrs:{type:"success"},on:{click:function(t){n.search()}}},[n._v("检索")])],1)],1),n._v(" "),e("br"),n._v(" "),e("Row",{attrs:{type:"flex",align:"middle"}},[e("Col",{attrs:{span:"5"}},[e("span",[n._v("光交名称:")])]),n._v(" "),e("Col",{attrs:{span:"19"}},[e("Input",{model:{value:n.onuName,callback:function(t){n.onuName=t},expression:"onuName"}})],1)],1),n._v(" "),e("br"),n._v(" "),e("Row",{attrs:{type:"flex",align:"middle"}},[e("Col",{attrs:{span:"5"}},[e("span",[n._v("光交编号:")])]),n._v(" "),e("Col",{attrs:{span:"19"}},[e("Input",{model:{value:n.onuNum,callback:function(t){n.onuNum=t},expression:"onuNum"}})],1)],1),n._v(" "),e("br"),n._v(" "),e("Row",{attrs:{type:"flex",align:"middle"}},[e("Col",{attrs:{span:"5"}},[e("span",[n._v("设备编号:")])]),n._v(" "),e("Col",{attrs:{span:"19"}},[e("Input",{model:{value:n.deviceNum,callback:function(t){n.deviceNum=t},expression:"deviceNum"}})],1)],1),n._v(" "),e("br"),n._v(" "),e("Row",{attrs:{type:"flex",align:"middle"}},[e("Col",{attrs:{span:"5"}},[e("span",[n._v("网络制式:")])]),n._v(" "),e("Col",{attrs:{span:"19"}},[e("i-select",{model:{value:n.nettype,callback:function(t){n.nettype=t},expression:"nettype"}},[e("i-option",{attrs:{value:"2G"}},[n._v("2G")]),n._v(" "),e("i-option",{attrs:{value:"NB-IoT"}},[n._v("NB-IoT")]),n._v(" "),e("i-option",{attrs:{value:"2G NB-IoT"}},[n._v("2G NB-IoT")])],1)],1)],1),n._v(" "),e("br"),n._v(" "),e("Row",{attrs:{type:"flex",align:"middle"}},[e("Col",{attrs:{span:"4"}},[e("span",[n._v("经        度:")])]),n._v(" "),e("Col",{attrs:{span:"12",offset:"1"}},[e("Input",{model:{value:n.lng,callback:function(t){n.lng=t},expression:"lng"}})],1)],1),n._v(" "),e("br"),n._v(" "),e("Row",{attrs:{type:"flex",align:"middle"}},[e("Col",{attrs:{span:"4"}},[e("span",[n._v("纬        度:")])]),n._v(" "),e("Col",{attrs:{span:"12",offset:"1"}},[e("Input",{model:{value:n.lat,callback:function(t){n.lat=t},expression:"lat"}})],1),n._v(" "),e("Col",{attrs:{span:"6",offset:"1"}},[e("Button",{staticClass:"mybtn",attrs:{type:"success"},on:{click:function(t){n.req_post()}}},[n._v("获取地址")])],1)],1),n._v(" "),e("br"),n._v(" "),e("Row",{attrs:{type:"flex",align:"middle"}},[e("Col",{attrs:{span:"4",offset:"0"}},[e("span",[n._v("区        域:")])]),n._v(" "),e("Col",{attrs:{span:"12",offset:"1"}},[e("Input",{model:{value:n.district,callback:function(t){n.district=t},expression:"district"}})],1)],1),n._v(" "),e("br"),n._v(" "),e("Row",{attrs:{type:"flex",align:"middle"}},[e("Col",{attrs:{span:"5"}},[e("span",[n._v("详细地址:")])]),n._v(" "),e("Col",{attrs:{span:"19"}},[e("Input",{model:{value:n.addr,callback:function(t){n.addr=t},expression:"addr"}})],1)],1),n._v(" "),e("br")],1),n._v(" "),e("flexbox",{staticClass:"myflexbox"},[e("flexbox-item",[e("Button",{staticClass:"collbtn",attrs:{type:"success"},on:{click:function(t){n.add()}}},[n._v("新增")])],1),n._v(" "),e("flexbox-item",[e("Button",{staticClass:"collbtn",attrs:{type:"success"},on:{click:function(t){n.getloc()}}},[n._v("地址")])],1),n._v(" "),e("flexbox-item",[e("Button",{staticClass:"collbtn",attrs:{type:"success"},on:{click:function(t){n.edit()}}},[n._v("修改")])],1)],1),n._v(" "),e("flexbox",{staticClass:"myflexbox"},[e("flexbox-item",[e("Button",{staticClass:"collbtn",attrs:{type:"success"},on:{click:function(t){n.loconf()}}},[n._v("锁具配置")])],1),n._v(" "),e("flexbox-item",[e("Button",{staticClass:"collbtn",attrs:{type:"success"},on:{click:function(t){n.getrol()}}},[n._v("本机操作授权")])],1)],1),n._v(" "),e("flexbox",{staticClass:"myflexbox"},[e("flexbox-item",[e("Button",{staticClass:"collbtn",attrs:{type:"success"},on:{click:function(t){n.openloc(0)}}},[n._v("及时开锁")])],1),n._v(" "),e("flexbox-item",[e("Button",{staticClass:"collbtn",attrs:{type:"success"},on:{click:function(t){n.openmap()}}},[n._v("地图展示")])],1)],1),n._v(" "),e("Modal",{attrs:{title:"锁具配置"},on:{"on-ok":n.ok,"on-cancel":n.cancel},model:{value:n.modal1,callback:function(t){n.modal1=t},expression:"modal1"}},[e("div",[n._v("\n      通过勾选配置锁具接入端口,并选择锁具型号,需确保配置与现场情况一致!\n    ")]),n._v(" "),n._l(n.locs,function(t,o){return e("Row",{key:o,attrs:{type:"flex",align:"middle"}},[e("Col",{attrs:{span:"1"}}),n._v(" "),e("Col",{attrs:{span:"8"}},[e("Checkbox",{model:{value:t[1],callback:function(o){n.$set(t,1,o)},expression:"item[1]"}},[n._v(n._s(t[0]))])],1),n._v(" "),e("Col",{attrs:{span:"5",offset:"2"}},[e("span",[n._v("选择型号:")])]),n._v(" "),e("Col",{attrs:{span:"8"}},[e("i-select",{model:{value:t[2],callback:function(o){n.$set(t,2,o)},expression:"item[2]"}},[e("i-option",{attrs:{value:"foha-001"}},[n._v("foha-001")]),n._v(" "),e("i-option",{attrs:{value:"fomei-001"}},[n._v("fomei-001")])],1)],1)],1)})],2)],1)},c=[],u={render:l,staticRenderFns:c},d=u,r=o("VU/8"),f=e,p=r(i,d,!1,f,"data-v-c6322ace",null);t.default=p.exports},HkMk:function(n,t,o){var e=o("Qw/Z");"string"==typeof e&&(e=[[n.i,e,""]]),e.locals&&(n.exports=e.locals);o("rjj0")("5f272f2e",e,!0,{})},"Qw/Z":function(n,t,o){t=n.exports=o("FZ+f")(!1),t.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},fnuy:function(n,t,o){t=n.exports=o("FZ+f")(!1),t.push([n.i,".infomain {\n  height: 100vh;\n  padding-top: 46px; }\n  .infomain .myHeader {\n    position: fixed;\n    width: 100%;\n    z-index: 1;\n    top: 0; }\n  .infomain .searchtxt {\n    font-size: 12px; }\n  .infomain .searchtit {\n    font-size: 12px; }\n  .infomain .myflexbox {\n    padding: 0.625rem 1.25rem; }\n  .infomain .collbtn {\n    font-size: 14px;\n    width: 100%; }\n  .infomain .logbox {\n    height: 100%;\n    overflow: auto;\n    -webkit-overflow-scrolling: touch;\n    position: relative; }\n  .infomain .myinput {\n    padding: 0 1.25rem; }\n  .infomain .myinput .mybtn {\n      float: right; }\n  header {\n  position: fixed;\n  top: 0;\n  width: 100%;\n  z-index: 2; }\n  footer {\n  position: fixed;\n  bottom: 0;\n  width: 100%;\n  /*   z-index: 2;*/ }\n",""])}});