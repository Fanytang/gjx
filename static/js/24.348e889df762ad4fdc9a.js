webpackJsonp([24],{"0Azd":function(t,n,e){"use strict";function a(t){e("0vBX")}Object.defineProperty(n,"__esModule",{value:!0});var o=(e("kHyB"),{data:function(){return{bottomLock:!1,pageNum:0,pageSize:10,thereNoData:!0,firstload:!1,alarmlogonuname:"",searchAlarmStatus:"",alarmlogData:[],defaultValue:"pls",list:[{key:"pls",value:"请选择"},{key:"1",value:"新产生"},{key:"2",value:"已取消"},{key:"3",value:"已确认"},{key:"4",value:"已审核"}]}},created:function(){this.projectid=sessionStorage.getItem("projectid"),this.phoneNum=sessionStorage.getItem("phone"),this.permission=sessionStorage.getItem("permission")},methods:{loadTopAjax:function(){this.alarmlogsearch(),this.$refs.loadmore.onTopLoaded()},loadBottomAjax:function(){var t=this;this.thereNoData&&(this.bottomLock=!0,this.pageNum++,this.$http.get("/OnuMonitorNew/DataCommunicate",{params:{requestType:36,pageNum:this.pageNum,pageSize:this.pageSize,phoneNum:this.phoneNum,projectid:this.projectid,searchCondition:this.alarmonuname}}).then(function(n){if(t.$vux.loading.hide(),"noRecord"==n.data)t.thereNoData=!1,console.log("没有数据"),t.$vux.toast.show({text:"无更多数据",type:"text"});else{var e=[];for(var a in n.data)e.push(JSON.parse(n.data[a]));e.length<t.pageSize&&(t.thereNoData=!1),t.alarmlogData=t.alarmlogData.concat(e),console.log(n)}t.bottomLock=!1}).catch(function(n){console.log(n),t.$vux.loading.hide(),t.$vux.toast.show({text:"网络不给力",type:"text",position:"top"})}))},goHome:function(){this.$router.push({name:"home"})},alarmlogsearch:function(){var t=this;this.firstload=!0,this.pageNum=0,this.thereNoData=!0,this.$vux.loading.show({text:"加载中"}),this.searchAlarmStatus=this.$refs.defaultValueRef.getFullValue()[0].value,this.$http.get("/OnuMonitorNew/DataCommunicate",{params:{requestType:36,pageNum:this.pageNum,pageSize:this.pageSize,phoneNum:this.phoneNum,projectid:this.projectid,searchAlarmStatus:this.searchAlarmStatus,searchOnuName:this.alarmlogonuname,permission:this.permission}}).then(function(n){if(console.log(n),"noRecord"==n.data)t.alarmlogData="",t.thereNoData=!1,t.$vux.toast.show({text:"暂无相关数据",type:"text"}),t.$vux.loading.hide();else{t.$vux.loading.hide();var e=[];for(var a in n.data)e.push(JSON.parse(n.data[a]));e.length<t.pageSize&&(t.thereNoData=!1),t.alarmlogData=e,console.log(t.alarmlogData[0].executor)}}).catch(function(t){console.log(t)})}}}),s=function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"alarmlog"},[a("x-header",{staticClass:"myHeader"},[t._v("告警历史查询"),a("img",{attrs:{slot:"right",width:"22",height:"22",src:e("77/w"),alt:""},on:{click:function(n){t.goHome()}},slot:"right"})]),t._v(" "),a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadBottomAjax,expression:"loadBottomAjax"}],staticClass:"logbox",attrs:{"infinite-scroll-disabled":"bottomLock","infinite-scroll-distance":"10","infinite-scroll-immediate-check":"false"}},[a("group",{attrs:{title:"光交名称"}},[a("x-input",{staticClass:"searchtit",attrs:{title:"",type:"text",placeholder:"请输入光交名称或区域"},model:{value:t.alarmlogonuname,callback:function(n){t.alarmlogonuname=n},expression:"alarmlogonuname"}})],1),t._v(" "),a("group",{attrs:{title:"告警状态"}},[a("selector",{ref:"defaultValueRef",staticClass:"searchtit",attrs:{title:"",options:t.list},model:{value:t.defaultValue,callback:function(n){t.defaultValue=n},expression:"defaultValue"}})],1),t._v(" "),a("flexbox",{staticClass:"myflexbox"},[a("flexbox-item",[a("x-button",{staticClass:"collbtn",attrs:{type:"primary"},nativeOn:{click:function(n){t.alarmlogsearch()}}},[t._v("检索")])],1)],1),t._v(" "),a("mt-loadmore",{ref:"loadmore",attrs:{"top-method":t.loadTopAjax,"auto-fill":!1}},[t._l(t.alarmlogData,function(n,e){return a("group",{key:e,attrs:{"label-width":"5em",title:"检索结果"}},[a("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:"光交编码",value:n.onuNum}}),t._v(" "),a("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:"光交名称",value:n.onuName}}),t._v(" "),a("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:"告警类型",value:n.alarmType}}),t._v(" "),a("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:"处理状态",value:n.alarmStatus}}),t._v(" "),a("cell",{directives:[{name:"show",rawName:"v-show",value:void 0!=n.executor,expression:"item.executor!=undefined"}],staticClass:"searchtxt",attrs:{primary:"content",title:"处理执行人",value:n.executor}}),t._v(" "),a("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:"告警时间",value:n.alarmTime}})],1)}),t._v(" "),t.firstload?a("load-more",{directives:[{name:"show",rawName:"v-show",value:t.thereNoData,expression:"thereNoData"}],attrs:{tip:"加载中"}}):t._e(),t._v(" "),a("load-more",{directives:[{name:"show",rawName:"v-show",value:!t.thereNoData,expression:"!thereNoData"}],attrs:{"show-loading":!1,tip:"暂无更多数据","background-color":"#fbf9fe"}})],2)],1)],1)},l=[],i={render:s,staticRenderFns:l},r=i,c=e("VU/8"),u=a,h=c(o,r,!1,u,"data-v-726ef6f2",null);n.default=h.exports},"0vBX":function(t,n,e){var a=e("qPRp");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e("rjj0")("9246c854",a,!0,{})},brMa:function(t,n,e){n=t.exports=e("FZ+f")(!1),n.push([t.i,".alarmlog {\n  height: 100vh;\n  padding-top: 46px; }\n  .alarmlog .myHeader {\n    position: fixed;\n    width: 100%;\n    z-index: 1;\n    top: 0; }\n  .alarmlog .searchtxt {\n    font-size: 12px; }\n  .alarmlog .searchtit {\n    font-size: 12px; }\n  .alarmlog .myflexbox {\n    padding: 0.9375rem 0.625rem; }\n  .alarmlog .collbtn {\n    font-size: 14px; }\n  .alarmlog .logbox {\n    height: 100%;\n    overflow: auto;\n    -webkit-overflow-scrolling: touch;\n    position: relative; }\n",""])},kHyB:function(t,n,e){var a=e("brMa");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e("rjj0")("28c7d803",a,!0,{})},qPRp:function(t,n,e){n=t.exports=e("FZ+f")(!1),n.push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])}});