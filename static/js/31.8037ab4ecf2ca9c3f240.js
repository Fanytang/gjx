webpackJsonp([31],{"/pIu":function(t,e,i){var n=i("kxFB");e=t.exports=i("FZ+f")(!1),e.push([t.i,"\n.button-div[data-v-193e678c] {\r\n  margin-top: 20px;\r\n  width: 100%;\n}\n.img-div[data-v-193e678c] {\r\n  text-align: center;\n}\n.addpic[data-v-193e678c] {\r\n  width: 100px;\n}\nspan[data-v-193e678c] {\r\n  font-size: 14px;\r\n  color: #575757;\n}\n.button-c[data-v-193e678c] {\r\n  width: 80%;\r\n  margin-top:20px;\r\n  margin-bottom: 20px;\r\n  font-size: 16px;\n}\n.checker-item[data-v-193e678c] {\r\n  width: 100px;\r\n  height: 26px;\r\n  line-height: 26px;\r\n  text-align: center;\r\n  border-radius: 3px;\r\n  border: 1px solid #ccc;\r\n  background-color: #fff;\r\n  margin-right: 6px;\n}\n.checker-item-selected[data-v-193e678c] {\r\n  background: #ffffff url("+n(i("6jCO"))+") no-repeat right bottom;\r\n  border-color: #ff4a00;\n}\r\n",""])},"4KqH":function(t,e,i){var n=i("/pIu");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("0c169300",n,!0,{})},"6jCO":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAMAAACecocUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTZDOEJBQ0E3NkIxMTFFNEE3MzJFOUJCMEU5QUM0QkIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTZDOEJBQ0I3NkIxMTFFNEE3MzJFOUJCMEU5QUM0QkIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBNkM4QkFDODc2QjExMUU0QTczMkU5QkIwRTlBQzRCQiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBNkM4QkFDOTc2QjExMUU0QTczMkU5QkIwRTlBQzRCQiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PnMGp3kAAAAJUExURf9KAP///////4Jqdw0AAAADdFJOU///ANfKDUEAAAAuSURBVHjaTMpBDgAABAPB5f+PlhLUpZMWuQcYMWLEyDN4ymqa5KS4+3G+KAEGACQmAGlKzr56AAAAAElFTkSuQmCC"},"aG+t":function(t,e,i){"use strict";function n(t){i("4KqH")}Object.defineProperty(e,"__esModule",{value:!0});var a=i("mtWM"),o=i.n(a),s=i("U7mS"),l=i.n(s),c=i("7+uW"),r=i("ABCa"),u=i("rGqP"),p=i("YxJB"),d=i("3Lt7"),h=i("2sLL"),m=i("ALGc"),g=i("3BeM"),f=i("/0UN"),v=i("hGvq");c.default.use(g.a);r.a,u.a,p.a,d.a,h.a,m.a,g.a,f.a,v.a;c.default.use(g.a);var x={components:{XHeader:r.a,Divider:u.a,Flexbox:p.a,FlexboxItem:d.a,XButton:h.a,XTextarea:m.a,ToastPlugin:g.a,Checker:f.a,CheckerItem:v.a},data:function(){return{isPhoto:!0,imgUrls:[],filesItem:[],pollingResult:"",pollingResultExplain:"",item:this.$route.query.item,phoneNum:"",deviceNum:""}},watch:{imgUrls:"toggleAddPic"},created:function(){var t=this;this.$http.get("/OnuMonitorNew/DataCommunicate",{params:{requestType:104,pollingDetailsId:this.item.pollingDetailsId}}).then(function(e){t.deviceNum=e.data.deviceNum}).catch(function(t){console.log(t)}),this.phoneNum=sessionStorage.getItem("phone")},methods:{unlock:function(t){var e=this;this.$vux.loading.show({text:"正在解锁中"}),this.$jsonp("http://www.foome.com.cn:8080/ONUDataGather/lockController/openLock?phoneNum="+this.phoneNum+"&deviceNum="+this.deviceNum+"&lockflag="+t,{callbackName:"openLock_callback"}).then(function(t){e.$vux.loading.hide(),console.log(t),"success"==t.name?e.$vux.toast.show({text:"开锁指令下发成功",type:"success",isShowMask:!0}):"wait"==t.name?e.$vux.toast.show({text:"现场设备未准备好,请先激活",type:"warn",isShowMask:!0}):"opened"==t.name?e.$vux.toast.show({text:"门已被打开",type:"success",isShowMask:!0}):"noConfig"==t.name&&e.$vux.toast.show({text:"参数未配置",type:"cancel",isShowMask:!0})}).catch(function(t){console.log(t)})},goBack:function(){this.$router.push({name:"planTaskDesc",query:{item:this.item}})},toggleAddPic:function(){var t=this;t.imgUrls.length>=1?t.isPhoto=!1:t.isPhoto=!0},addPic:function(t){return this.$refs.divGenres.querySelectorAll("input[type=file]")[0].click(),!1},onFileChange:function(t){var e=t.target.files||t.dataTransfer.files;e.length&&this.createImage(e,t)},createImage:function(t,e){var i=this;l()(t[0],{width:480}).then(function(t){return i.filesItem.push(t),i.imgUrls.push(t.base64),t}).always(function(){e.target.value=null})},delImage:function(t){var e=this;e.imgUrls.splice(t,1),e.filesItem.splice(t,1)},saveHandle:function(){for(var t=this,e=this.filesItem,i=0;i<e.length;i++){var n=e[i],a=new FormData,s=new Date,l="cms"+s.getDay()+s.getHours()+s.getMinutes()+s.getSeconds()+s.getMilliseconds()+Math.round(1e4*Math.random());a.append("filename",n.file,this.item.pollingDetailsId+","+l+".jpg");var c={headers:{"Content-Type":"multipart/form-data"}};o.a.post("/OnuMonitorNew/AndroidUploadServlet",a,c).then(function(t){})}o.a.post("/OnuMonitorNew/DataCommunicate?pollingResultExplain="+this.pollingResultExplain+"&pollingResult="+this.pollingResult+"&pollingDetailsId="+this.item.pollingDetailsId+"&requestType=107").then(function(e){t.$vux.toast.show({text:'<span style="color:#ffffff">提交成功</span>',type:"success",onHide:function(){t.$router.push({name:"planTaskList"})}})}).catch(function(e){t.$vux.toast.show({text:'<span style="color:#ffffff">提交失败</span>',type:"warn"})})},goHome:function(){this.$router.push({name:"home"})}}},A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"padding-top":"48px"}},[n("x-header",{staticStyle:{position:"fixed",top:"0",width:"100%","z-index":"1000"},attrs:{"left-options":{preventGoBack:!0}},on:{"on-click-back":function(e){t.goBack()}}},[t._v("巡检"),n("img",{attrs:{slot:"right",width:"22",height:"22",src:i("77/w"),alt:""},on:{click:function(e){t.goHome()}},slot:"right"})]),t._v(" "),n("divider",[t._v("照片拍摄")]),t._v(" "),n("flexbox",[n("flexbox-item",{attrs:{span:6}},[n("div",{ref:"divGenres",staticClass:"img-div"},[n("img",{directives:[{name:"show",rawName:"v-show",value:t.isPhoto,expression:"isPhoto"}],staticClass:"addpic",attrs:{src:i("dRIw")}}),t._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:!t.isPhoto,expression:"!isPhoto"}]},t._l(t.imgUrls,function(e,a){return n("li",{staticClass:"list-link"},[n("a",[n("img",{attrs:{src:e}})]),t._v(" "),n("img",{staticStyle:{background:"#ffffff",width:"20px","border-color":"#ff4a00","z-index":"10",float:"left","margin-left":"-23px","border-radius":"5px","margin-top":"3px",position:"absolute"},attrs:{src:i("j9iW")},on:{click:function(e){t.delImage(a)}}})])})),t._v(" "),n("input",{staticStyle:{display:"none"},attrs:{type:"file",accept:"image/jpg,image/png,image/jpeg,image/gif",capture:"camera"},on:{change:t.onFileChange}})])]),t._v(" "),n("flexbox-item",{attrs:{span:6}},[n("div",{staticClass:"img-div"},[n("x-button",{attrs:{mini:"",type:"primary"},nativeOn:{click:function(e){return t.addPic(e)}}},[t._v("拍照")])],1)])],1),t._v(" "),n("divider",{staticStyle:{"margin-bottom":"30px"}},[t._v("巡检结果")]),t._v(" "),n("flexbox",[n("flexbox-item",{staticStyle:{"text-align":"center"},attrs:{span:12}},[n("checker",{attrs:{"default-item-class":"checker-item","selected-item-class":"checker-item-selected"},model:{value:t.pollingResult,callback:function(e){t.pollingResult=e},expression:"pollingResult"}},[n("checker-item",{attrs:{value:"无异常"}},[t._v("无异常")]),t._v(" "),n("checker-item",{attrs:{value:"发现故障"}},[t._v("发现故障")])],1)],1)],1),t._v(" "),n("divider",{staticStyle:{"margin-top":"30px"}},[t._v("情况说明")]),t._v(" "),n("flexbox",[n("flexbox-item",{attrs:{span:12}},[n("x-textarea",{attrs:{placeholder:"请输入说明"},model:{value:t.pollingResultExplain,callback:function(e){t.pollingResultExplain=e},expression:"pollingResultExplain"}})],1)],1),t._v(" "),n("flexbox",[n("flexbox-item",[n("x-button",{staticClass:"button-c",attrs:{type:"primary"},nativeOn:{click:function(e){t.unlock(0)}}},[t._v("开锁")])],1),t._v(" "),n("flexbox-item",[n("x-button",{staticClass:"button-c",attrs:{type:"primary"},nativeOn:{click:function(e){t.saveHandle()}}},[t._v("提交")])],1)],1)],1)},k=[],b={render:A,staticRenderFns:k},w=b,y=i("VU/8"),I=n,M=y(x,w,!1,I,"data-v-193e678c",null);e.default=M.exports}});