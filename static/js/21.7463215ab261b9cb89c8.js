webpackJsonp([21],{"+L77":function(n,t,a){t=n.exports=a("FZ+f")(!1),t.push([n.i,".confirmalarm {\n  height: 100vh;\n  padding-top: 46px; }\n  .confirmalarm .myHeader {\n    position: fixed;\n    width: 100%;\n    z-index: 1;\n    top: 0; }\n  .confirmalarm .searchtxt {\n    font-size: 12px; }\n  .confirmalarm .doitornot {\n    margin-left: 15px; }\n  .confirmalarm .searchtit {\n    font-size: 12px; }\n  .confirmalarm .myflexbox {\n    padding: 0.9375rem 0.625rem; }\n  .confirmalarm .collbtn {\n    font-size: 14px; }\n  .confirmalarm .logbox {\n    height: 100%;\n    overflow: auto;\n    -webkit-overflow-scrolling: touch;\n    position: relative; }\n",""])},"6qLP":function(n,t,a){t=n.exports=a("FZ+f")(!1),t.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},FcpQ:function(n,t,a){"use strict";function e(n){a("lFGB")}Object.defineProperty(t,"__esModule",{value:!0});var o=a("mvHQ"),i=a.n(o),s=(a("w4ag"),{data:function(){return{bottomLock:!1,pageNum:0,pageSize:10,thereNoData:!0,firstload:!1,show:!1,menus3:{"title.noop":"确定删除此条告警信息?",delete:'<span style="color:red">确定</span>'},delnum:"",alarmData:[],alarmonuname:"",projectid:"",phoneNum:"",tagDisposeAlarm:!1,tagCancelAlarm:!1}},created:function(){"true"==sessionStorage.getItem("tagDisposeAlarm")&&(this.tagDisposeAlarm=!0),"true"==sessionStorage.getItem("tagCancelAlarm")&&(this.tagCancelAlarm=!0),this.projectid=sessionStorage.getItem("projectid"),this.phoneNum=sessionStorage.getItem("phone"),this.alarmsearch()},methods:{onDelete:function(){var n=this;this.$vux.loading.show({text:"加载中"}),this.$http.get("/OnuMonitorNew/DataCommunicate",{params:{requestType:64,alarmInfoId:this.delnum}}).then(function(t){n.$vux.loading.hide(),console.log(t),"success"==t.data?(n.$vux.toast.show({text:"取消成功",type:"text"}),n.alarmsearch()):n.$vux.toast.show({text:"数据提交失败",type:"text"})}),console.log(1)},cancel:function(n){this.show=!0,this.delnum=n},loadTopAjax:function(){this.alarmsearch(),this.$refs.loadmore.onTopLoaded()},loadBottomAjax:function(){var n=this;this.thereNoData&&(this.bottomLock=!0,this.pageNum++,this.$http.get("/OnuMonitorNew/DataCommunicate",{params:{requestType:109,pageNum:this.pageNum,pageSize:this.pageSize,phoneNum:this.phoneNum,projectid:this.projectid,searchCondition:this.alarmonuname}}).then(function(t){if(n.$vux.loading.hide(),"noRecord"==t.data)n.thereNoData=!1,console.log("没有数据"),n.$vux.toast.show({text:"无更多数据",type:"text"});else{var a=[];for(var e in t.data)a.push(JSON.parse(t.data[e]));a.length<n.pageSize&&(n.thereNoData=!1),n.alarmData=n.alarmData.concat(a),console.log(t)}n.bottomLock=!1}).catch(function(t){console.log(t),n.$vux.loading.hide(),n.$vux.toast.show({text:"网络不给力",type:"text",position:"top"})}))},goHome:function(){this.$router.push({name:"home"})},alarmsearch:function(){var n=this;this.firstload=!0,this.pageNum=0,this.thereNoData=!0,this.$vux.loading.show({text:"加载中"}),this.$http.get("/OnuMonitorNew/DataCommunicate",{params:{requestType:109,pageNum:this.pageNum,pageSize:this.pageSize,phoneNum:this.phoneNum,projectid:this.projectid,searchCondition:this.alarmonuname}}).then(function(t){if(console.log(t),"noRecord"==t.data)n.alarmData="",n.thereNoData=!1,n.$vux.toast.show({text:"暂无相关数据",type:"text"}),n.$vux.loading.hide();else{n.$vux.loading.hide();var a=[];for(var e in t.data)a.push(JSON.parse(t.data[e]));a.length<n.pageSize&&(n.thereNoData=!1),n.alarmData=a,console.log(n.alarmData)}}).catch(function(n){console.log(n)})},gomap:function(){if(this.alarmData){var n=[],t=[];this.alarmData.forEach(function(t){n.push(t.onuId)});for(var a=0;a<n.length;a++)n[a],t.includes(n[a])?(n.splice(a,1),a--):t.push(n[a]);console.log(t),this.$router.push({name:"map",params:{allonuId:t}})}else this.$vux.toast.show({text:"无目标站点",type:"text"})},goalarmsingleconf:function(n){console.log(n),this.$router.push({name:"alarmsingleconf",query:{itemdata:i()(n)}})}}}),r=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"confirmalarm"},[e("x-header",{staticClass:"myHeader"},[n._v("待处理告警"),e("img",{attrs:{slot:"right",width:"22",height:"22",src:a("77/w"),alt:""},on:{click:function(t){n.goHome()}},slot:"right"})]),n._v(" "),e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:n.loadBottomAjax,expression:"loadBottomAjax"}],staticClass:"logbox",attrs:{"infinite-scroll-disabled":"bottomLock","infinite-scroll-distance":"10","infinite-scroll-immediate-check":"false"}},[e("group",{attrs:{title:""}},[e("x-input",{staticClass:"searchtit",attrs:{title:"",type:"text",placeholder:"请输入光交名称或区域"},model:{value:n.alarmonuname,callback:function(t){n.alarmonuname=t},expression:"alarmonuname"}})],1),n._v(" "),e("flexbox",{staticClass:"myflexbox"},[e("flexbox-item",[e("x-button",{staticClass:"collbtn",attrs:{type:"primary"},nativeOn:{click:function(t){n.alarmsearch()}}},[n._v("检索")])],1),n._v(" "),e("flexbox-item",[e("x-button",{staticClass:"collbtn",attrs:{type:"primary"},nativeOn:{click:function(t){n.gomap()}}},[n._v("地图")])],1)],1),n._v(" "),e("mt-loadmore",{ref:"loadmore",attrs:{"top-method":n.loadTopAjax,"auto-fill":!1}},[n._l(n.alarmData,function(t,a){return e("group",{key:a,attrs:{"label-width":"5em",title:"检索结果"}},[e("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:"区域",value:t.area}}),n._v(" "),e("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:"箱体名称",value:t.onuName}}),n._v(" "),e("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:"告警信息",value:t.alarmMessage}}),n._v(" "),e("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:"告警时间",value:t.alarmTime}}),n._v(" "),n.tagDisposeAlarm?e("x-button",{staticClass:"doitornot",attrs:{mini:"",type:"primary"},nativeOn:{click:function(a){n.goalarmsingleconf(t)}}},[n._v("处理")]):n._e(),n._v(" "),n.tagCancelAlarm?e("x-button",{staticClass:"doitornot",attrs:{mini:"",type:"primary"},nativeOn:{click:function(a){n.cancel(t.alarmInfoId)}}},[n._v("取消")]):n._e()],1)}),n._v(" "),n.firstload?e("load-more",{directives:[{name:"show",rawName:"v-show",value:n.thereNoData,expression:"thereNoData"}],attrs:{tip:"加载中"}}):n._e(),n._v(" "),e("load-more",{directives:[{name:"show",rawName:"v-show",value:!n.thereNoData,expression:"!thereNoData"}],attrs:{"show-loading":!1,tip:"暂无更多数据","background-color":"#fbf9fe"}})],2),n._v(" "),e("actionsheet",{attrs:{menus:n.menus3,"show-cancel":""},on:{"on-click-menu-delete":function(t){n.onDelete()}},model:{value:n.show,callback:function(t){n.show=t},expression:"show"}})],1)],1)},l=[],c={render:r,staticRenderFns:l},m=c,h=a("VU/8"),u=e,p=h(s,m,!1,u,"data-v-61d48bc3",null);t.default=p.exports},lFGB:function(n,t,a){var e=a("6qLP");"string"==typeof e&&(e=[[n.i,e,""]]),e.locals&&(n.exports=e.locals);a("rjj0")("92e52d92",e,!0,{})},w4ag:function(n,t,a){var e=a("+L77");"string"==typeof e&&(e=[[n.i,e,""]]),e.locals&&(n.exports=e.locals);a("rjj0")("4814cf87",e,!0,{})}});