webpackJsonp([39],{B0F2:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,"\n.button-div[data-v-58e2e285] {\r\n  margin-top: 20px;\r\n  width: 100%;\n}\n.img-div[data-v-58e2e285] {\r\n  text-align: center;\n}\n.addpic[data-v-58e2e285] {\r\n  width: 100px;\n}\nspan[data-v-58e2e285] {\r\n  font-size: 14px;\r\n  color: #575757;\n}\n.button-c[data-v-58e2e285] {\r\n  width: 80%;\r\n  margin-top: 20px;\r\n  margin-bottom: 20px;\r\n  font-size: 16px;\n}\r\n\r\n",""])},gJU3:function(t,e,a){"use strict";function i(t){a("iJix")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("mtWM"),s=a.n(n),o=a("U7mS"),r=a.n(o),l=a("7+uW"),c=a("ABCa"),p=a("rGqP"),f=a("YxJB"),x=a("3Lt7"),m=a("2sLL"),u=a("pDNl"),d=a("3BeM");l.default.use(d.a);c.a,p.a,f.a,x.a,m.a,u.a,d.a;l.default.use(d.a);var v={components:{XHeader:c.a,Divider:p.a,Flexbox:f.a,FlexboxItem:x.a,XButton:m.a,XInput:u.a,ToastPlugin:d.a},data:function(){return{isPhoto:!0,imgUrls:[],filesItem:[],item:this.$route.query.item,orderDisposeExplain:"",deviceNum:"",phoneNum:""}},watch:{imgUrls:"toggleAddPic"},created:function(){console.log(this.item),this.phoneNum=sessionStorage.getItem("phone"),this.deviceNum=this.item.deviceNum},methods:{unlock:function(t){var e=this;this.$vux.loading.show({text:"正在解锁中"}),this.$jsonp("http://www.foome.com.cn:8080/ONUDataGather/lockController/openLock?phoneNum="+this.phoneNum+"&deviceNum="+this.deviceNum+"&lockflag="+t,{callbackName:"openLock_callback"}).then(function(t){e.$vux.loading.hide(),console.log(t),"success"==t.name?e.$vux.toast.show({text:"开锁指令下发成功",type:"success",isShowMask:!0}):"wait"==t.name?e.$vux.toast.show({text:"现场设备未准备好,请先激活",type:"warn",isShowMask:!0}):"opened"==t.name?e.$vux.toast.show({text:"门已被打开",type:"success",isShowMask:!0}):"noConfig"==t.name&&e.$vux.toast.show({text:"参数未配置",type:"cancel",isShowMask:!0})}).catch(function(t){console.log(t)})},goHome:function(){this.$router.push({name:"home"})},goBack:function(){this.$router.push({name:"orderList"})},toggleAddPic:function(){var t=this;t.imgUrls.length>=1?t.isPhoto=!1:t.isPhoto=!0},addPic:function(t){return this.$refs.divGenres.querySelectorAll("input[type=file]")[0].click(),!1},onFileChange:function(t){var e=t.target.files||t.dataTransfer.files;e.length&&this.createImage(e,t)},createImage:function(t,e){var a=this;r()(t[0],{width:480}).then(function(t){return a.filesItem.push(t),a.imgUrls.push(t.base64),t}).always(function(){e.target.value=null})},delImage:function(t){var e=this;e.imgUrls.splice(t,1),e.filesItem.splice(t,1)},saveHandle:function(){for(var t=this,e=this.filesItem,a=0;a<e.length;a++){var i=e[a],n=new FormData,o=new Date,r="cms"+o.getDay()+o.getHours()+o.getMinutes()+o.getSeconds()+o.getMilliseconds()+Math.round(1e4*Math.random());n.append("filename",i.file,this.item.orderInfoId+","+r+".jpg");var l={headers:{"Content-Type":"multipart/form-data"}};s.a.post("/OnuMonitorNew/OrderUploadServlet",n,l).then(function(t){})}s.a.post("/OnuMonitorNew/DataCommunicate?orderInfoId="+this.item.orderInfoId+"&requestType=112&orderDisposeExplain="+this.orderDisposeExplain).then(function(e){t.$vux.toast.show({text:'<span style="color:#ffffff">处理成功</span>',type:"success",onHide:function(){t.$router.back(-1)}})}).catch(function(e){t.$vux.toast.show({text:'<span style="color:#ffffff">操作失败</span>',type:"warn"})})}}},h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"padding-top":"48px"}},[i("x-header",{staticClass:"myHeader",staticStyle:{position:"fixed",top:"0",width:"100%","z-index":"1000"},attrs:{"left-options":{preventGoBack:!0}},on:{"on-click-back":function(e){t.goBack()}}},[t._v("工单处理"),i("img",{attrs:{slot:"right",width:"22",height:"22",src:a("77/w"),alt:""},on:{click:function(e){t.goHome()}},slot:"right"})]),t._v(" "),i("divider",[t._v("工单详情")]),t._v(" "),i("flexbox",{attrs:{orient:"vertical"}},[i("flexbox-item",[i("flexbox",[i("flexbox-item",{attrs:{span:3}},[i("span",[t._v("  光交名称：")])]),t._v(" "),i("flexbox-item",{attrs:{span:8}},[i("span",[t._v(t._s(t.item.onuName))])]),t._v(" "),i("flexbox-item",{attrs:{span:1}})],1)],1),t._v(" "),i("flexbox-item",[i("flexbox",[i("flexbox-item",{attrs:{span:3}},[i("span",[t._v("  所属区域：")])]),t._v(" "),i("flexbox-item",{attrs:{span:8}},[i("span",[t._v(t._s(t.item.area))])]),t._v(" "),i("flexbox-item",{attrs:{span:1}})],1)],1),t._v(" "),i("flexbox-item",[i("flexbox",[i("flexbox-item",{attrs:{span:3}},[i("span",[t._v("  工单内容：")])]),t._v(" "),i("flexbox-item",{attrs:{span:8}},[i("span",[t._v(t._s(t.item.orderContent))])]),t._v(" "),i("flexbox-item",{attrs:{span:1}})],1)],1),t._v(" "),i("flexbox-item",[i("flexbox",[i("flexbox-item",{attrs:{span:3}},[i("span",[t._v("  截止日期：")])]),t._v(" "),i("flexbox-item",{attrs:{span:8}},[i("span",[t._v(t._s(t.item.endTime))])]),t._v(" "),i("flexbox-item",{attrs:{span:1}})],1)],1),t._v(" "),i("flexbox-item",[i("flexbox",[i("flexbox-item",{attrs:{span:3}},[i("span",[t._v("  详细地址：")])]),t._v(" "),i("flexbox-item",{attrs:{span:8}},[i("span",[t._v(t._s(t.item.addr))])]),t._v(" "),i("flexbox-item",{attrs:{span:1}})],1)],1)],1),t._v(" "),i("divider",[t._v("照片拍摄")]),t._v(" "),i("flexbox",[i("flexbox-item",{attrs:{span:6}},[i("div",{ref:"divGenres",staticClass:"img-div"},[i("img",{directives:[{name:"show",rawName:"v-show",value:t.isPhoto,expression:"isPhoto"}],staticClass:"addpic",attrs:{src:a("dRIw")}}),t._v(" "),i("ul",{directives:[{name:"show",rawName:"v-show",value:!t.isPhoto,expression:"!isPhoto"}]},t._l(t.imgUrls,function(e,n){return i("li",{staticClass:"list-link"},[i("a",[i("img",{attrs:{src:e}})]),t._v(" "),i("img",{staticStyle:{background:"#ffffff",width:"20px","border-color":"#ff4a00","z-index":"10",float:"left","margin-left":"-23px","border-radius":"5px","margin-top":"3px",position:"absolute"},attrs:{src:a("j9iW")},on:{click:function(e){t.delImage(n)}}})])})),t._v(" "),i("input",{staticStyle:{display:"none"},attrs:{type:"file",accept:"image/jpg,image/png,image/jpeg,image/gif",capture:"camera"},on:{change:t.onFileChange}})])]),t._v(" "),i("flexbox-item",{attrs:{span:6}},[i("div",{staticClass:"img-div"},[i("x-button",{attrs:{mini:"",type:"primary"},nativeOn:{click:function(e){return t.addPic(e)}}},[t._v("拍照")])],1)])],1),t._v(" "),i("divider",[t._v("工单处理")]),t._v(" "),i("flexbox",[i("flexbox-item",{attrs:{span:12}},[i("x-input",{attrs:{placeholder:"请输入说明"},model:{value:t.orderDisposeExplain,callback:function(e){t.orderDisposeExplain=e},expression:"orderDisposeExplain"}})],1)],1),t._v(" "),i("flexbox",[i("flexbox-item",[i("x-button",{staticClass:"button-c",attrs:{type:"primary"},nativeOn:{click:function(e){t.unlock(0)}}},[t._v("开锁")])],1),t._v(" "),i("flexbox-item",[i("x-button",{staticClass:"button-c",attrs:{type:"primary"},nativeOn:{click:function(e){t.saveHandle()}}},[t._v("提交")])],1)],1)],1)},g=[],b={render:h,staticRenderFns:g},_=b,w=a("VU/8"),y=i,k=w(v,_,!1,y,"data-v-58e2e285",null);e.default=k.exports},iJix:function(t,e,a){var i=a("B0F2");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("3fb2cf14",i,!0,{})}});