webpackJsonp([14],{"85va":function(t,n,e){"use strict";function a(t){e("Wvlz")}Object.defineProperty(n,"__esModule",{value:!0});var s=(e("wudO"),{data:function(){return{active:!0,list:[],mysrc:[],havepic:!1,options:{getThumbBoundsFn:function(t){var n=document.querySelectorAll(".previewer-demo-img")[t],e=window.pageYOffset||document.documentElement.scrollTop,a=n.getBoundingClientRect();return{x:a.left,y:a.top+e,w:a.width}}},onuName:"",readonly:!1,databegin:"",dataend:"",projectid:"",phoneNum:"",permission:"",searchData:"",showPositionValue:!1,toastText:"",position:"default",detailonuid:"",deviceNum:"",tagOpen:!1,tagOpen1:!1,tagOpen2:!1,tagPic:!1,sendmsg:""}},created:function(){this.detailonuid=sessionStorage.getItem("detailonuid"),this.deviceNum=sessionStorage.getItem("deviceNum"),this.projectid=sessionStorage.getItem("projectid"),this.phoneNum=sessionStorage.getItem("phone"),this.permission=sessionStorage.getItem("permission"),this.search(),"true"==sessionStorage.getItem("tagOpen")&&(this.tagOpen=!0),"true"==sessionStorage.getItem("tagOpen1")?this.tagOpen1=!0:this.tagOpen1=!1,"true"==sessionStorage.getItem("tagOpen2")&&(this.tagOpen2=!0),"true"==sessionStorage.getItem("tagPic")&&(this.tagPic=!0),this.websocket(),this.getsingleimg()},methods:{getsingleimg:function(){var t=this,n=this;this.$http.get("/OnuMonitorNew/DataCommunicate",{params:{requestType:105,onuId:this.detailonuid}}).then(function(e){"noRecord"==e.data?console.log("暂无图片"):"failure"==e.data?console.log("发生异常"):(t.havepic=!0,e.data.split(",").forEach(function(t,e){n.mysrc[e]={src:t}}),n.list=n.mysrc)}).catch(function(t){console.log(t)})},getNowFormatDate:function(){var t=new Date,n=t.getMonth()+1,e=t.getDate();return n>=1&&n<=9&&(n="0"+n),e>=0&&e<=9&&(e="0"+e),t.getFullYear()+"-"+n+"-"+e+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},websocket:function(){var t=this,n=new WebSocket("ws://120.26.105.35:8080/ONUDataGather/websocket/"+t.deviceNum);n.onopen=function(){console.log("建立连接")},n.onmessage=function(n){clearTimeout(t.sendmsg);var e=n.data.split(",");t.searchData.doorStatus=e[0],t.searchData.door1=e[1],t.searchData.door2=e[2],t.searchData.door3=e[3],t.searchData.door4=e[4],t.searchData.dumpenergy=e[5],t.searchData.temp=e[6],t.searchData.humidness=e[7],t.searchData.signdata=e[8],t.searchData.alarmType=e[9],t.searchData.time=t.getNowFormatDate(),t.active=!1,t.sendmsg=setTimeout(function(){t.active=!0},4e3)}},show:function(t){this.$refs.previewer.show(t)},godetdata:function(){this.$router.push({name:"detectiondata"})},goHome:function(){this.$router.push({name:"home"})},search:function(t){var n=this;this.$vux.loading.show({text:"加载中"}),this.$http.get("/OnuMonitorNew/DataCommunicate?requestType=108&onuId="+this.detailonuid).then(function(e){n.$vux.loading.hide(),"noRecord"==e.data?(n.infoData="",n.position=t,n.showPositionValue=!0,n.toastText="没有数据"):(n.searchData=e.data,console.log(n.searchData))}).catch(function(t){console.log(t)})},unlock:function(t){var n=this;this.$vux.loading.show({text:"正在解锁中"}),this.$jsonp("http://www.foome.com.cn:8080/ONUDataGather/lockController/openLock?phoneNum="+this.phoneNum+"&deviceNum="+this.deviceNum+"&lockflag="+t,{callbackName:"openLock_callback"}).then(function(t){n.$vux.loading.hide(),console.log(t),"success"==t.name?n.$vux.toast.show({text:"开锁指令下发成功",type:"success",isShowMask:!0}):"wait"==t.name?n.$vux.toast.show({text:"现场设备未准备好,请先激活",type:"warn",isShowMask:!0}):"opened"==t.name?n.$vux.toast.show({text:"门已被打开",type:"success",isShowMask:!0}):"noConfig"==t.name&&n.$vux.toast.show({text:"参数未配置",type:"cancel",isShowMask:!0})}).catch(function(t){console.log(t)})},goalarmlist:function(){this.$router.push({name:"confirmalarm"})}}}),i=function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"singledetail"},[a("x-header",{staticClass:"myHeader"},[t._v("光交详情"),a("img",{attrs:{slot:"right",width:"22",height:"22",src:e("77/w"),alt:""},on:{click:function(n){t.goHome()}},slot:"right"})]),t._v(" "),a("group",{attrs:{"label-width":"5em",title:"站点详情"}},[a("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:"光交名称",value:t.searchData.onuName}}),t._v(" "),a("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:"区域",value:t.searchData.area}}),t._v(" "),a("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:"经度",value:t.searchData.longitude}}),t._v(" "),a("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:"维度",value:t.searchData.latitude}}),t._v(" "),a("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:"设备编号",value:t.searchData.deviceNum}}),t._v(" "),a("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:"详细地址",value:t.searchData.addr}})],1),t._v(" "),a("group",{attrs:{"label-width":"5em",title:"检测状态"}},[a("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:"门状态",value:t.searchData.doorStatus}}),t._v(" "),"nodev"!=t.searchData.lock1?a("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:"锁一",value:t.searchData.lock1}}):t._e(),t._v(" "),"nodev"!=t.searchData.lock2?a("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:"锁二",value:t.searchData.lock2}}):t._e(),t._v(" "),"nodev"!=t.searchData.lock3?a("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:"锁三",value:t.searchData.lock3}}):t._e(),t._v(" "),"nodev"!=t.searchData.lock4?a("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:"锁四",value:t.searchData.lock4}}):t._e(),t._v(" "),a("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:"剩余电量",value:t.searchData.dumpenergy}},[t._v(t._s(t.searchData.dumpenergy)+"%")]),t._v(" "),a("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:"温度",value:t.searchData.temp}},[t._v(t._s(t.searchData.temp)+"℃")]),t._v(" "),a("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:"湿度",value:t.searchData.humidness}},[t._v(t._s(t.searchData.humidness)+"%rh")]),t._v(" "),a("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:"信号值",value:t.searchData.signdata}}),t._v(" "),a("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:"数据时间",value:t.searchData.time}})],1),t._v(" "),a("group",{attrs:{"label-width":"",title:"告警状态"}},["无告警"!=t.searchData.alarmType?a("cell",{staticClass:"searchtxt",staticStyle:{color:"red"},attrs:{primary:"content",title:t.searchData.alarmType,value:""}},[a("x-button",{staticClass:"loginbtn",attrs:{mini:"",type:"primary"},nativeOn:{click:function(n){t.goalarmlist()}}},[t._v("告警列表")])],1):a("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:t.searchData.alarmType,value:""}},[a("x-button",{staticClass:"loginbtn",attrs:{mini:"",type:"primary"},nativeOn:{click:function(n){t.goalarmlist()}}},[t._v("告警列表")])],1)],1),t._v(" "),t.tagPic?a("group",{directives:[{name:"show",rawName:"v-show",value:t.havepic,expression:"havepic"}],attrs:{"label-width":"5em",title:"现场图片"}},[a("div",{staticClass:"imgbox"},[t._l(t.list,function(n,e){return e<3?a("img",{staticClass:"previewer-demo-img",attrs:{src:n.src,width:"100"},on:{click:function(n){t.show(e)}}}):t._e()}),t._v(" "),a("div",[a("previewer",{ref:"previewer",attrs:{list:t.list,options:t.options}})],1)],2)]):t._e(),t._v(" "),a("flexbox",{staticClass:"myflexbox"},[t.tagOpen1?a("flexbox-item",[a("x-button",{staticClass:"loginbtn",class:{active:t.active},attrs:{disabled:t.active,type:"primary"},nativeOn:{click:function(n){t.unlock(1)}}},[t._v("开锁1")])],1):t._e(),t._v(" "),t.tagOpen2?a("flexbox-item",[a("x-button",{staticClass:"loginbtn",class:{active:t.active},attrs:{disabled:t.active,type:"primary"},nativeOn:{click:function(n){t.unlock(2)}}},[t._v("开锁2")])],1):t._e(),t._v(" "),t.tagOpen?a("flexbox-item",[a("x-button",{staticClass:"loginbtn",class:{active:t.active},attrs:{disabled:t.active,type:"primary"},nativeOn:{click:function(n){t.unlock(0)}}},[t._v("开锁")])],1):t._e()],1)],1)},o=[],c={render:i,staticRenderFns:o},r=c,l=e("VU/8"),h=a,u=l(s,r,!1,h,"data-v-e50023a2",null);n.default=u.exports},FCym:function(t,n,e){n=t.exports=e("FZ+f")(!1),n.push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},Wvlz:function(t,n,e){var a=e("FCym");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e("rjj0")("878c71cc",a,!0,{})},dz4M:function(t,n,e){n=t.exports=e("FZ+f")(!1),n.push([t.i,".singledetail {\n  padding-top: 46px; }\n  .singledetail .myHeader {\n    position: fixed;\n    width: 100%;\n    z-index: 1;\n    top: 0; }\n  .singledetail .searchbtn {\n    padding: 10px 15px; }\n  .singledetail .searchtxt {\n    font-size: 12px; }\n  .singledetail .searchtit {\n    font-size: 12px; }\n  .singledetail .weui-btn {\n    font-size: 14px; }\n  .singledetail .mytab {\n    width: 100%;\n    position: fixed;\n    bottom: 0;\n    border-top: 1px solid #04BE02; }\n  .singledetail .mytab .dodata {\n      background-color: #ECECEC;\n      color: #04BE02; }\n  .singledetail .mytab div {\n      background-color: #fff;\n      height: 46px;\n      line-height: 46px;\n      float: left;\n      width: 50%;\n      text-align: center; }\n  .singledetail .myflexbox {\n    padding: 0.625rem 0.625rem; }\n  .singledetail .myflexbox button.active {\n      background-color: #ccc; }\n  .singledetail .imgbox {\n    overflow: hidden; }\n  .singledetail .imgbox .previewer-demo-img {\n      width: 30%;\n      float: left;\n      margin-left: 0.59375rem;\n      margin-top: 0.59375rem; }\n",""])},wudO:function(t,n,e){var a=e("dz4M");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e("rjj0")("315eb512",a,!0,{})}});