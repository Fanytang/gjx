webpackJsonp([45],{enVQ:function(t,e,o){var a=o("uSIU");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);o("rjj0")("069cf55e",a,!0,{})},nRsL:function(t,e,o){"use strict";function a(t){o("enVQ")}Object.defineProperty(e,"__esModule",{value:!0});var i=o("mtWM"),n=o.n(i),s=o("ABCa"),r=o("YxJB"),l=o("3Lt7"),c=o("2sLL"),p=o("pDNl"),d=(s.a,r.a,l.a,c.a,p.a,{components:{XHeader:s.a,Flexbox:r.a,FlexboxItem:l.a,XButton:c.a,XInput:p.a},data:function(){return{bottomLock:!1,pageNum:0,pageSize:10,thereNoData:!0,firstload:!1,projectid:"",phoneNum:"",dataList:[],searchCondition:""}},created:function(){this.projectid=sessionStorage.getItem("projectid"),this.phoneNum=sessionStorage.getItem("phone"),this.query()},methods:{loadTopAjax:function(){this.query(),this.$refs.loadmore.onTopLoaded()},loadBottomAjax:function(){var t=this;this.thereNoData&&(this.bottomLock=!0,this.pageNum++,n.a.get("/OnuMonitorNew/DataCommunicate",{params:{requestType:111,pageNum:this.pageNum,pageSize:this.pageSize,searchCondition:this.searchCondition,phoneNum:this.phoneNum,projectid:this.projectid}}).then(function(e){if(t.$vux.loading.hide(),"noRecord"==e.data)t.thereNoData=!1,console.log("没有数据"),t.$vux.toast.show({text:"无更多数据",type:"text"});else{var o=[];for(var a in e.data)o.push(JSON.parse(e.data[a]));o.length<t.pageSize&&(t.thereNoData=!1),t.dataList=t.dataList.concat(o),console.log(e)}t.bottomLock=!1}).catch(function(e){console.log(e),t.$vux.loading.hide(),t.$vux.toast.show({text:"网络不给力",type:"text",position:"top"})}))},goMap:function(){var t=[],e=[];this.dataList.forEach(function(e){t.push(e.onuId)});for(var o=0;o<t.length;o++)t[o],e.includes(t[o])?(t.splice(o,1),o--):e.push(t[o]);console.log(e),this.$router.push({name:"map",params:{allonuId:e}})},goBack:function(){this.$router.push({name:"orderManage"})},query:function(){var t=this;this.firstload=!0,this.pageNum=0,this.thereNoData=!0,this.$vux.loading.show({text:"加载中"});n.a.get("/OnuMonitorNew/DataCommunicate",{params:{requestType:111,pageNum:this.pageNum,pageSize:this.pageSize,searchCondition:this.searchCondition,phoneNum:this.phoneNum,projectid:this.projectid}}).then(function(e){if(t.$vux.loading.hide(),"noRecord"==e.data)t.dataList="",t.thereNoData=!1,console.log("没有数据"),t.$vux.toast.show({text:"无更多数据",type:"text"}),t.$vux.loading.hide();else{t.$vux.loading.hide();var o=[];for(var a in e.data)o.push(JSON.parse(e.data[a]));o.length<t.pageSize&&(t.thereNoData=!1),t.dataList=o,console.log(e)}t.bottomLock=!1}).catch(function(e){console.log(e),t.$vux.loading.hide(),t.$vux.toast.show({text:"网络不给力",type:"text",position:"top"})})},orderDealHandle:function(t){this.$router.push({name:"orderHandle",query:{item:t}})},goHome:function(){this.$router.push({name:"home"})}}}),x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"padding-top":"100px"}},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadBottomAjax,expression:"loadBottomAjax"}],staticClass:"logbox",attrs:{"infinite-scroll-disabled":"bottomLock","infinite-scroll-distance":"10","infinite-scroll-immediate-check":"false"}},[a("div",{staticStyle:{position:"fixed",top:"0",width:"100%",background:"#ffff",filter:"alpha(opacity:30)",opacity:"1","z-index":"1000"}},[a("x-header",{attrs:{"left-options":{preventGoBack:!0}},on:{"on-click-back":function(e){t.goBack()}}},[t._v("待处理工单"),a("img",{attrs:{slot:"right",width:"22",height:"22",src:o("77/w"),alt:""},on:{click:function(e){t.goHome()}},slot:"right"})]),t._v(" "),a("flexbox",{attrs:{orient:"vertical"}},[a("flexbox-item",[a("flexbox",[a("flexbox-item",{attrs:{span:7}},[a("x-input",{attrs:{placeholder:"请输入关键字检索"},model:{value:t.searchCondition,callback:function(e){t.searchCondition=e},expression:"searchCondition"}})],1),t._v(" "),a("flexbox-item",[a("x-button",{attrs:{mini:"",type:"primary"},nativeOn:{click:function(e){t.query()}}},[t._v("检索")])],1),t._v(" "),a("flexbox-item",[a("x-button",{attrs:{mini:"",type:"primary"},nativeOn:{click:function(e){t.goMap()}}},[t._v("地图")])],1)],1)],1),t._v(" "),a("flexbox-item",[a("hr")])],1)],1),t._v(" "),a("mt-loadmore",{ref:"loadmore",attrs:{"top-method":t.loadTopAjax,"auto-fill":!1}},[t._l(t.dataList,function(e,o){return a("flexbox",{key:o,attrs:{orient:"vertical"}},[a("flexbox-item",[a("flexbox",[a("flexbox-item",{attrs:{span:3}},[a("span",[t._v("  区域：")])]),t._v(" "),a("flexbox-item",{attrs:{span:6}},[a("span",[t._v(t._s(e.area))])]),t._v(" "),a("flexbox-item",{attrs:{span:3}})],1)],1),t._v(" "),a("flexbox-item",[a("flexbox",[a("flexbox-item",{attrs:{span:3}},[a("span",[t._v("  光交名称：")])]),t._v(" "),a("flexbox-item",{attrs:{span:6}},[a("span",[t._v(t._s(e.onuName))])]),t._v(" "),a("flexbox-item",{attrs:{span:3}})],1)],1),t._v(" "),a("flexbox-item",[a("flexbox",[a("flexbox-item",{attrs:{span:3}},[a("span",[t._v("  工单内容：")])]),t._v(" "),a("flexbox-item",{attrs:{span:6}},[a("span",[t._v(t._s(e.orderContent))])]),t._v(" "),a("flexbox-item",{attrs:{span:3}},[a("x-button",{attrs:{mini:"",type:"primary"},nativeOn:{click:function(o){t.orderDealHandle(e)}}},[t._v("处理")])],1)],1)],1),t._v(" "),a("flexbox-item",[a("flexbox",[a("flexbox-item",{attrs:{span:3}},[a("span",[t._v("  截止日期：")])]),t._v(" "),a("flexbox-item",{attrs:{span:6}},[a("span",[t._v(t._s(e.endTime))])]),t._v(" "),a("flexbox-item",{attrs:{span:3}})],1)],1),t._v(" "),a("flexbox-item",[a("hr")])],1)}),t._v(" "),t.firstload?a("load-more",{directives:[{name:"show",rawName:"v-show",value:t.thereNoData,expression:"thereNoData"}],attrs:{tip:"加载中"}}):t._e(),t._v(" "),a("load-more",{directives:[{name:"show",rawName:"v-show",value:!t.thereNoData,expression:"!thereNoData"}],attrs:{"show-loading":!1,tip:"暂无更多数据","background-color":"#fbf9fe"}})],2)],1)])},h=[],u={render:x,staticRenderFns:h},m=u,f=o("VU/8"),v=a,g=f(d,m,!1,v,"data-v-2a2a9bd4",null);e.default=g.exports},uSIU:function(t,e,o){e=t.exports=o("FZ+f")(!1),e.push([t.i,"\nspan[data-v-2a2a9bd4] {\r\n  font-size: 14px;\r\n  color: #575757;\n}\r\n\r\n",""])}});