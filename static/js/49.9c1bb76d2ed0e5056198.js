webpackJsonp([49],{"5fYH":function(n,t,e){t=n.exports=e("FZ+f")(!1),t.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},KCNy:function(n,t,e){var a=e("5fYH");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);e("rjj0")("2206d50c",a,!0,{})},lLvV:function(n,t,e){"use strict";function a(n){e("KCNy")}Object.defineProperty(t,"__esModule",{value:!0});var o=(e("8lc1"),{data:function(){return{showdialog:!1,orderContent:"",defaultValue:"",orderlist:[],orderEndtime:"",orderExcutorId:"",list:[],mysrc:[],havealpic:!1,options:{getThumbBoundsFn:function(n){var t=document.querySelectorAll(".previewer-demo-img")[n],e=window.pageYOffset||document.documentElement.scrollTop,a=t.getBoundingClientRect();return{x:a.left,y:a.top+e,w:a.width}}},reviewsingledata:[],alarmonuname:"",projectid:"",phoneNum:"",permission:""}},created:function(){this.phoneNum=sessionStorage.getItem("phone"),this.permission=sessionStorage.getItem("permission"),this.projectid=sessionStorage.getItem("projectid"),this.reviewsingledata=JSON.parse(this.$route.query.itemdata),this.getpic(),this.getWorkerPhone()},methods:{getWorkerPhone:function(){var n=this;this.$http.get("/OnuMonitorNew/DataCommunicate",{params:{requestType:35,projectid:this.projectid,permission:this.permission,phoneNum:this.phoneNum}}).then(function(t){console.log(JSON.parse(t.data[0]));var e=[];for(var a in t.data)e.push({key:JSON.parse(t.data[a]).appid,value:JSON.parse(t.data[a]).appuser});n.defaultValue=e[0].key,console.log(e),n.orderlist=e})},postworkorder:function(){var n=this;""==this.orderEndtime?this.$vux.toast.show({text:"请选择时间",type:"text"}):(this.$vux.loading.show({text:"加载中"}),this.orderExcutorId=this.$refs.defaultValueRef.getFullValue()[0].key,this.$http.get("/OnuMonitorNew/DataCommunicate",{params:{requestType:41,alarmId:this.reviewsingledata.alarmId,orderContent:this.orderContent,orderExcutorId:this.orderExcutorId,orderEndtime:this.orderEndtime,appPhone:this.phoneNum,projectid:this.projectid}}).then(function(t){n.$vux.loading.hide(),console.log(t),"success"==t.data?(n.$vux.toast.show({text:"提交成功",type:"text"}),n.orderContent="",n.orderEndtime="",n.showdialog=!1,n.$router.back(-1)):n.$vux.toast.show({text:"提交失败",type:"text"})}).catch(function(n){console.log(n)}))},backdialog:function(){this.showdialog=!1},getpic:function(){var n=this,t=this;this.$http.get("/OnuMonitorNew/DataCommunicate",{params:{requestType:38,alarmId:this.reviewsingledata.alarmId}}).then(function(e){"noRecord"==e.data?console.log("暂无图片"):"failure"==e.data?console.log("发生异常"):(n.havealpic=!0,console.log(e),console.log(e.data.split(",")),e.data.split(",").forEach(function(n,e){t.mysrc[e]={src:n}}),t.list=t.mysrc)}).catch(function(n){console.log(n)})},workorder:function(){this.showdialog=!0},show:function(n){this.$refs.previewer.show(n)},reviewdone:function(){var n=this;this.$vux.loading.show({text:"提交中"}),this.$http.get("/OnuMonitorNew/DataCommunicate",{params:{requestType:39,alarmId:this.reviewsingledata.alarmId}}).then(function(t){n.$vux.loading.hide(),"success"==t.data?(n.$vux.toast.show({text:"数据提交成功",type:"text"}),n.$router.back(-1)):n.$vux.toast.show({text:"数据提交失败",type:"text"}),console.log(t)}).catch(function(n){console.log(n)})},reviewcancel:function(){var n=this;this.$vux.loading.show({text:"提交中"}),this.$http.get("/OnuMonitorNew/DataCommunicate",{params:{requestType:40,alarmId:this.reviewsingledata.alarmId}}).then(function(t){n.$vux.loading.hide(),"success"==t.data?(n.$vux.toast.show({text:"数据提交成功",type:"text"}),n.$router.back(-1)):n.$vux.toast.show({text:"数据提交失败",type:"text"}),console.log(t)}).catch(function(n){console.log(n)})},goHome:function(){this.$router.push({name:"home"})}}}),i=function(){var n=this,t=n.$createElement,a=n._self._c||t;return a("div",{staticClass:"singlealarm"},[a("x-header",{staticClass:"myHeader",nativeOn:{click:function(t){n.goHome()}}},[n._v("告警确认审核"),a("img",{attrs:{slot:"right",width:"22",height:"22",src:e("77/w"),alt:""},on:{click:function(t){n.goHome()}},slot:"right"})]),n._v(" "),a("group",{attrs:{"label-width":"5em",title:"告警详情"}},[a("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:"光交名称",value:n.reviewsingledata.onuName}}),n._v(" "),a("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:"光交编码",value:n.reviewsingledata.onuNum}}),n._v(" "),a("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:"告警类型",value:n.reviewsingledata.alarmType}}),n._v(" "),a("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:"处理时间",value:n.reviewsingledata.executeTime}}),n._v(" "),a("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:"处理说明",value:n.reviewsingledata.alarmManage}})],1),n._v(" "),a("group",{directives:[{name:"show",rawName:"v-show",value:n.havealpic,expression:"havealpic"}],attrs:{"label-width":"5em",title:"告警确认图片"}},[a("div",{staticClass:"imgbox"},[n._l(n.list,function(t,e){return e<3?a("img",{staticClass:"previewer-demo-img",attrs:{src:t.src,width:"100"},on:{click:function(t){n.show(e)}}}):n._e()}),n._v(" "),a("div",[a("previewer",{ref:"previewer",attrs:{list:n.list,options:n.options}})],1)],2)]),n._v(" "),a("flexbox",{staticClass:"myflexbox"},[a("flexbox-item",[a("x-button",{staticClass:"collbtn",attrs:{type:"primary"},nativeOn:{click:function(t){n.reviewdone()}}},[n._v("审核通过")])],1),n._v(" "),a("flexbox-item",[a("x-button",{staticClass:"collbtn",attrs:{type:"primary"},nativeOn:{click:function(t){n.reviewcancel()}}},[n._v("审核不通过")])],1),n._v(" "),a("flexbox-item",[a("x-button",{staticClass:"collbtn",attrs:{type:"primary"},nativeOn:{click:function(t){n.workorder()}}},[n._v("生成工单")])],1)],1),n._v(" "),a("div",{staticClass:"workdialog"},[a("x-dialog",{staticClass:"dialog-demo",attrs:{"hide-on-blur":!0},model:{value:n.showdialog,callback:function(t){n.showdialog=t},expression:"showdialog"}},[a("group",{attrs:{"label-width":"5em",title:"生成工单"}},[a("cell",{staticClass:"searchtxt",attrs:{primary:"content",title:"箱体名称",value:n.reviewsingledata.onuName}}),n._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:n.orderContent,expression:"orderContent"}],staticClass:"ordertextarea",attrs:{name:"",placeholder:"请输入工单内容",cols:"30",rows:"5"},domProps:{value:n.orderContent},on:{input:function(t){t.target.composing||(n.orderContent=t.target.value)}}}),n._v(" "),a("selector",{ref:"defaultValueRef",staticClass:"searchtit",attrs:{title:"工单指派人",options:n.orderlist},model:{value:n.defaultValue,callback:function(t){n.defaultValue=t},expression:"defaultValue"}}),n._v(" "),a("datetime",{staticClass:"searchtit",attrs:{format:"YYYY-MM-DD HH:mm",title:"截止时间"},model:{value:n.orderEndtime,callback:function(t){n.orderEndtime=t},expression:"orderEndtime"}})],1),n._v(" "),a("flexbox",{staticClass:"myflexbox"},[a("flexbox-item",[a("x-button",{staticClass:"collbtn",attrs:{type:"primary"},nativeOn:{click:function(t){n.backdialog()}}},[n._v("返回")])],1),n._v(" "),a("flexbox-item",[a("x-button",{staticClass:"collbtn",attrs:{type:"primary"},nativeOn:{click:function(t){n.postworkorder()}}},[n._v("提交")])],1)],1)],1)],1)],1)},s=[],r={render:i,staticRenderFns:s},l=r,c=e("VU/8"),d=a,u=c(o,l,!1,d,"data-v-14a24c6a",null);t.default=u.exports}});