webpackJsonp([43],{"+rfj":function(t,e,a){"use strict";function n(t){a("ysvN")}Object.defineProperty(e,"__esModule",{value:!0});var r=a("mvHQ"),o=a.n(r),s=a("YxJB"),i=a("3Lt7"),c=a("ABCa"),d=(s.a,i.a,c.a,{components:{Flexbox:s.a,FlexboxItem:i.a,XHeader:c.a},data:function(){return{checked:null,ceshi:"测试头",a:51,b:14,data2:[],data1:[],data:[],projectid:"",routerParams:"",myname:"",mydescr:""}},created:function(){this.projectid=sessionStorage.getItem("projectid"),this.refi()},methods:{changedr:function(t){this.checked=t.map(function(t){return t.id}).join(", ")},conf:function(){var t=this;this.$vux.loading.show({text:"加载中"}),console.log(1),console.log(this.checked),this.$http.get("/OnuMonitorNew/DataCommunicate",{params:{requestType:52,projectid:this.projectid,roleid:this.routerParams,name:this.myname,descr:this.mydescr,resources:this.checked}}).then(function(e){t.$vux.loading.hide(),"success"==e.data?(t.$vux.toast.show({text:"数据提交成功",type:"text"}),t.$router.push({name:"roleman"})):t.$vux.toast.show({text:"数据提交失败",type:"text"}),console.log(e)}).catch(function(e){t.$vux.loading.hide(),console.log(e)})},refi:function(){var t=this;this.routerParams=t.$route.params.roleId,this.myname=t.$route.params.name,this.mydescr=t.$route.params.descr,console.log(this.routerParams),this.$http.get("/OnuMonitorNew/DataCommunicate",{params:{requestType:51,roleId:this.routerParams}}).then(function(e){function a(t,e){var n,r=[];for(var o in t)t[o].pid==e&&(r.push(t[o]),n=a(t,t[o].id),t[o].children=[],n.length>0&&(t[o].children=n));return r}for(var n=o()(e.data),r=n.split("}").length-1-1,s=0;s<r;s++)t.data2.push(JSON.parse(e.data[s]));for(var s=0;s<r;s++)t.data2[s].label=t.data2[s].name,1==t.data2[s].isChecked&&(delete t.data2[s].isChecked,t.data2[s].isChecked=!0),0==t.data2[s].isChecked&&delete t.data2[s].isChecked;console.log(t.data2);var i=[];t.data=a(t.data2,0),t.data2.forEach(function(t){t.isChecked&&i.push(t)}),t.changedr(i),console.log(t.data)},function(t){console.log(t)})},goHome:function(){this.$router.push({name:"home"})}}}),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"rolemanconf"},[n("header",[n("x-header",{attrs:{slot:"buttom"},slot:"buttom"},[t._v("角色配置\n      "),n("img",{attrs:{slot:"right",width:"22",height:"22",src:a("77/w"),alt:""},on:{click:function(e){t.goHome()}},slot:"right"})]),t._v(" "),t._m(0),t._v(" "),n("div",{staticStyle:{"background-color":"#f6f5ec"}},[n("Row",{attrs:{type:"flex",align:"middle"}},[n("Col",{attrs:{span:"2"}},[n("div",{staticStyle:{height:"3rem"}})]),t._v(" "),n("Col",{attrs:{span:"5"}},[n("span",[t._v("角色名称:")])]),t._v(" "),n("Col",{attrs:{span:"16"}},[n("Input",{model:{value:this.$route.params.name,callback:function(e){t.$set(this.$route.params,"name",e)},expression:"this.$route.params.name"}})],1)],1),t._v(" "),n("Row",{attrs:{type:"flex",align:"middle"}},[n("Col",{attrs:{span:"2"}},[n("div",{staticStyle:{height:"3rem"}})]),t._v(" "),n("Col",{attrs:{span:"5"}},[n("span",[t._v("角色描述:")])]),t._v(" "),n("Col",{attrs:{span:"16"}},[n("i-input",{attrs:{type:"textarea"},model:{value:this.$route.params.descr,callback:function(e){t.$set(this.$route.params,"descr",e)},expression:"this.$route.params.descr"}})],1)],1)],1),t._v(" "),t._m(1)],1),t._v(" "),n("div",{staticStyle:{height:"400px",overflow:"auto","margin-top":"210px","margin-bottom":"50px"}},[n("tree",{attrs:{data:t.data,cbChanged:t.changedr}}),t._v(" "),n("div",{staticClass:"result"},[t._v("\n      Selected: "+t._s(t.checked)+"\n    ")])],1),t._v(" "),n("div",{staticClass:"div1"}),t._v(" "),n("footer",[n("x-button",{attrs:{type:"primary"},nativeOn:{click:function(e){t.conf()}}},[t._v("配置")])],1)])},h=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div2"},[a("span",[t._v("角色信息:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div2"},[a("span",[t._v("资源树:")])])}],u={render:l,staticRenderFns:h},p=u,m=a("VU/8"),v=n,f=m(d,p,!1,v,null,null);e.default=f.exports},"2i1R":function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,"\nheader {\r\n  position: fixed;\r\n  top: 0;\r\n  width: 100%;\r\n\r\n\r\n  z-index: 2;\n}\nfooter {\r\n  position: fixed;\r\n  bottom: 0;\r\n  width: 100%;\r\n\r\n  /*   z-index: 2;*/\n}\n.div3 {\r\n  background-color: #969696;\n}\n.div2 {\r\n  width: 100%;\r\n  height: 30px;\r\n  background-color: #969696;\r\n  line-height: 30px;\r\n  color: #F0F8FF;\n}\n.div1 {\r\n  background-color: #F5DEB3;\r\n  width: 100%;\r\n  height: 1px;\n}\r\n\r\n",""])},ysvN:function(t,e,a){var n=a("2i1R");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("f851b58c",n,!0,{})}});